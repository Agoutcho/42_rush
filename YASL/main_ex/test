#!yasl


{
    "A":2
    2:%==:2
    2:? (
        2:!:2 0:2
    ): (
        2:!:2
        9:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/":9
        9:][:9
        1:9 9:-:9
        9:%@ (
            9:#:9
            9:!^:9
            2:=:9
            9:==:9
            9:? (
                9:#:9 9:^:9 9:=:2 9:#:9 9:#!:9 1:9
            ):(
                9:#:9 9:^:9
            )
            1:9
            9:-:9
        )
        9:!:9
    )
} get_index_b64

{
    2 ^ 3 ^
    "m  \e[48;2;0;0;0m" +
    ";" 2 ^ + +
    ";" 2 ^ + +
    "\e[48;2;" 2 ^ +
}   create_color_string

102
51
1

{
    // Calculate combinaison
    7:=:8 7:!:7
    7:=:8 7:!:7
    6:8
    8:<<:8
    8:|:8
    7:=:8 7:!:7
    12:8
    8:<<:8
    8:|:8
    7:=:8 7:!:7
    18:8
    8:<<:8
    8:|:8

    //Red
    8:=:8
    16:8
    8:>>:8
    255:8
    8:&:8

    8:#:8
    8:!^:8

    //Green
    8:=:8
    8:8
    8:>>:8
    255:8
    8:&:8

    8:#:8    
    8:!^:8

    //Blue
    8:=:8
    255:8
    8:&:8

    8:#:8
    8:!^:8

    8:!:8

    8:create_color_string:8
    8:print:8
    // 8:print "\n":8 8:print
    // 8:print "\n":8 8:print
    // 8:print "\n":8 8:print


} get_rgb

{
    4:2
    2:#(
        get_index_b64
        2:=:7
        2:!!:2
    ):2
    get_rgb
} put_pixel_color

1
!=
? ("No args needed" print 1 exit) : !

read
0 %== ? ("Empty map \n" print exit 1) : !
! read
@(
    +
    read
)
!
0:][:1 // split la string dans la stack 1
1:=:0
4:0
0:/:0
1:(#(1:=:2 1:!:1)):1 // reverse la string dans la stack 2
0:1
1:
(
    1
    @(
        1 + // envoie 1 dans la stack 1
        (= = *) // duplique 2 fois 1 et multiplie : on a 1 (1*1)
        0:=:1 // envoie le nb carac dans stack 1 : 1 (1*1) nb 
        %> // comparaison (1*1) > nb ? 
        ? (= print " Map not a square \n" print 1 exit) 
        : (
            ==
            ? ("Map is a square \n" print 1:=:0 0) : 
            1)
    )
):1
0:=:2

!!
1:!:1

2:=:4
4:=:3
2:!:2
1:3 3:-:3
3:%@ (
    4:=:3
    3:%@ (
        2:put_pixel_color
        1:3
        3:-:3
    )
    "\n":3 3:print
    3:!:3
    1:3
    3:-:3
)
